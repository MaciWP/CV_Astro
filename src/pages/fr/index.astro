---
import Layout from "../../layouts/Layout.astro";
import { getRelativeLocaleUrl } from "astro:i18n";
import ErrorBoundary from "../../components/ErrorBoundary";

// Import CV components
import ProfileHeader from "../../components/cv/ProfileHeader";
import Experience from "../../components/cv/Experience";
import Skills from "../../components/cv/Skills";
import Languages from "../../components/cv/Languages";
import Education from "../../components/cv/Education";
import Projects from "../../components/cv/Projects";

// Enhanced metadata for SEO (French version)
const pageTitle = "Oriol Macias - Portfolio de Développeur Logiciel";
const pageDescription =
    "CV et portfolio d'Oriol Macias, Développeur Backend avec 8+ ans d'expérience intégrant des protocoles industriels et optimisant des centres de données.";
const ogImage = "/images/oriol_macias.jpg";
const canonicalUrl = "https://oriolmacias.dev/fr/";

// Enlaces a versiones en otros idiomas
const enUrl = getRelativeLocaleUrl("en", "");
const esUrl = getRelativeLocaleUrl("es", "");
---

<Layout
    title={pageTitle}
    description={pageDescription}
    lang="fr"
    ogImage={ogImage}
    canonicalUrl={canonicalUrl}
    alternateUrls={{
        en: enUrl,
        es: esUrl,
    }}
>
    <div
        id="cv-content"
        class="space-y-16"
        itemscope
        itemtype="https://schema.org/Person"
    >
        {/* ProfileHeader con ErrorBoundary */}
        <ErrorBoundary
            fallbackTitle="Error loading profile"
            fallbackMessage="Unable to load profile information. Please refresh the page."
            showReset={true}
        >
            <ProfileHeader client:load />
        </ErrorBoundary>

        {/* Experience con ErrorBoundary */}
        <ErrorBoundary
            fallbackTitle="Error loading experience"
            fallbackMessage="Unable to load work experience information."
        >
            <Experience client:visible />
        </ErrorBoundary>

        {/* Skills con ErrorBoundary */}
        <ErrorBoundary
            fallbackTitle="Error loading skills"
            fallbackMessage="Unable to load technical skills information."
        >
            <Skills client:visible />
        </ErrorBoundary>

        {/* Education con ErrorBoundary */}
        <ErrorBoundary
            fallbackTitle="Error loading education"
            fallbackMessage="Unable to load education information."
        >
            <Education client:visible />
        </ErrorBoundary>

        {/* Languages con ErrorBoundary */}
        <ErrorBoundary
            fallbackTitle="Error loading languages"
            fallbackMessage="Unable to load language proficiency information."
        >
            <Languages client:visible />
        </ErrorBoundary>

        {/* Projects con ErrorBoundary */}
        <ErrorBoundary
            fallbackTitle="Error loading projects"
            fallbackMessage="Unable to load project information."
        >
            <Projects client:visible />
        </ErrorBoundary>

        {/* Contenido SEO oculto */}
        <div class="sr-only">
            <div itemprop="name">Oriol Macias</div>
            <div itemprop="jobTitle">Développeur Logiciel</div>
            <div itemprop="description">
                Développeur Backend axé sur les solutions, spécialisé dans
                l'intégration de protocoles industriels (SNMP, MODBUS, BACnet)
                avec plus de 8 ans d'expérience dans les applications à haute
                performance.
            </div>
            <div itemprop="email">oriolomb@gmail.com</div>
            <a itemprop="url" href="https://oriolmacias.dev"
                >https://oriolmacias.dev</a
            >
            <a itemprop="sameAs" href="https://github.com/MaciWP">GitHub</a>
            <a
                itemprop="sameAs"
                href="https://linkedin.com/in/oriolmaciasbadosa">LinkedIn</a
            >
        </div>
    </div>
</Layout>
