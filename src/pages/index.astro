---
import Layout from "../layouts/Layout.astro";
import { getRelativeLocaleUrl } from "astro:i18n";
import ErrorBoundary from "../components/ErrorBoundary";

// Import CV components
import ProfileHeader from "../components/cv/ProfileHeader.astro";
import Experience from "../components/cv/Experience";
import Skills from "../components/cv/Skills.astro";
import Languages from "../components/cv/Languages";
import Education from "../components/cv/Education";
import Projects from "../components/cv/Projects";

// Enhanced metadata for SEO
const pageTitle = "Oriol Macias - Software Developer CV & Portfolio";
const pageDescription =
  "CV and portfolio for Oriol Macias, Backend Developer with 8+ years integrating industrial protocols and optimizing data center infrastructure.";
const ogImage = "/images/oriol_macias.jpg";
const canonicalUrl = "https://oriolmacias.dev/";

// Enlaces a versiones en otros idiomas
const esUrl = getRelativeLocaleUrl("es", "");
const frUrl = getRelativeLocaleUrl("fr", "");
---

<Layout
  title={pageTitle}
  description={pageDescription}
  lang="en"
  ogImage={ogImage}
  canonicalUrl={canonicalUrl}
  alternateUrls={{
    es: esUrl,
    fr: frUrl,
  }}
>
  <div
    id="cv-content"
    class="space-y-16"
    itemscope
    itemtype="https://schema.org/Person"
  >
    {/* ProfileHeader con ErrorBoundary */}
    <ErrorBoundary
      fallbackTitle="Error loading profile"
      fallbackMessage="Unable to load profile information. Please refresh the page."
      showReset={true}
    >
      <ProfileHeader />
    </ErrorBoundary>

    {/* Experience con ErrorBoundary */}
    <ErrorBoundary
      fallbackTitle="Error loading experience"
      fallbackMessage="Unable to load work experience information."
    >
      <Experience client:visible />
    </ErrorBoundary>

    {/* Skills con ErrorBoundary */}
    <ErrorBoundary
      fallbackTitle="Error loading skills"
      fallbackMessage="Unable to load technical skills information."
    >
      <Skills />
    </ErrorBoundary>

    {/* Education con ErrorBoundary */}
    <ErrorBoundary
      fallbackTitle="Error loading education"
      fallbackMessage="Unable to load education information."
    >
      <Education client:visible />
    </ErrorBoundary>

    {/* Languages con ErrorBoundary */}
    <ErrorBoundary
      fallbackTitle="Error loading languages"
      fallbackMessage="Unable to load language proficiency information."
    >
      <Languages client:visible />
    </ErrorBoundary>

    {/* Projects con ErrorBoundary */}
    <ErrorBoundary
      fallbackTitle="Error loading projects"
      fallbackMessage="Unable to load project information."
    >
      <Projects client:visible />
    </ErrorBoundary>

    {/* Contenido SEO oculto */}
    <div class="sr-only">
      <div itemprop="name">Oriol Macias</div>
      <div itemprop="jobTitle">Software Developer</div>
      <div itemprop="description">
        Solutions-driven Backend Developer specializing in industrial protocol
        integration (SNMP, MODBUS, BACnet) with 8+ years of delivering
        high-performance applications.
      </div>
      <div itemprop="email">oriolomb@gmail.com</div>
      <a itemprop="url" href="https://oriolmacias.dev"
        >https://oriolmacias.dev</a
      >
      <a itemprop="sameAs" href="https://github.com/MaciWP">GitHub</a>
      <a itemprop="sameAs" href="https://linkedin.com/in/oriolmaciasbadosa"
        >LinkedIn</a
      >
    </div>
  </div>
</Layout>
