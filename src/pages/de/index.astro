---
import Layout from "../../layouts/Layout.astro";
import { getRelativeLocaleUrl } from "astro:i18n";
import ErrorBoundary from "../../components/ErrorBoundary";

// Import CV components
import ProfileHeader from "../../components/cv/ProfileHeader.astro";
import Experience from "../../components/cv/Experience";
import Skills from "../../components/cv/Skills.astro";
import Languages from "../../components/cv/Languages";
import Education from "../../components/cv/Education.astro";
import Projects from "../../components/cv/Projects";
import FAQSchema from "../../components/FAQSchema.astro";

// Enhanced metadata for SEO (German version)
const pageTitle = "Oriol Macias - Software-Entwickler CV & Portfolio";
const pageDescription =
    "Professioneller Lebenslauf und Portfolio von Oriol Macias, einem Backend-Entwickler mit über 8 Jahren Erfahrung in der Integration industrieller Protokolle (SNMP, MODBUS, BACnet) und Rechenzentrumsinfrastruktur.";
const ogImage = "/images/oriol_macias.jpg";
const canonicalUrl = "https://oriolmacias.dev/de/";

// Enlaces a versiones en otros idiomas
const enUrl = getRelativeLocaleUrl("en", "");
const esUrl = getRelativeLocaleUrl("es", "");
const frUrl = getRelativeLocaleUrl("fr", "");

// FAQs for rich snippets
const faqs = [
  {
    question: "Haben Sie eine Arbeitsgenehmigung für die Schweiz?",
    answer: "Ja, ich habe eine EU-Arbeitsgenehmigung und bin berechtigt, sofort in der Schweiz zu arbeiten."
  },
  {
    question: "Auf welche Programmiersprachen sind Sie spezialisiert?",
    answer: "Ich bin auf Python und C# spezialisiert, mit umfangreicher Erfahrung in Django, .NET Framework und Core, und REST-API-Entwicklung."
  },
  {
    question: "Mit welchen industriellen Protokollen arbeiten Sie?",
    answer: "Ich habe über 8 Jahre Erfahrung in der Integration von SNMP-, MODBUS- und BACnet-Protokollen für DCIM-Plattformen."
  },
  {
    question: "Sind Sie für Remote-Arbeit verfügbar?",
    answer: "Ja, ich bin offen für Remote-, Hybrid- oder Vor-Ort-Positionen in der Schweiz oder Spanien."
  }
];
---

<Layout
    title={pageTitle}
    description={pageDescription}
    lang="de"
    ogImage={ogImage}
    canonicalUrl={canonicalUrl}
    alternateUrls={{
        en: enUrl,
        es: esUrl,
        fr: frUrl,
    }}
>
    <div
        id="cv-content"
        class="space-y-12"
        itemscope
        itemtype="https://schema.org/Person"
    >
        {/* ProfileHeader - SSG Optimized */}
        <div class="-mb-4">
            <ProfileHeader lang="de" />
        </div>

        {/* Experience con ErrorBoundary */}
        <ErrorBoundary
            fallbackTitle="Fehler beim Laden der Erfahrung"
            fallbackMessage="Die Berufserfahrung konnte nicht geladen werden."
        >
            <Experience lang="de" client:visible />
        </ErrorBoundary>

        {/* Skills - SSG Optimized */}
        <Skills lang="de" />

        {/* Education - SSG Optimized */}
        <Education lang="de" />

        {/* Languages con ErrorBoundary */}
        <ErrorBoundary
            fallbackTitle="Fehler beim Laden der Sprachen"
            fallbackMessage="Die Sprachkenntnisse konnten nicht geladen werden."
        >
            <Languages lang="de" client:visible />
        </ErrorBoundary>

        {/* Projects con ErrorBoundary */}
        <ErrorBoundary
            fallbackTitle="Fehler beim Laden der Projekte"
            fallbackMessage="Die Projektinformationen konnten nicht geladen werden."
        >
            <Projects lang="de" client:visible />
        </ErrorBoundary>

        {/* FAQ Section with structured data */}
        <FAQSchema faqs={faqs} lang="de" />

        {/* SEO hidden content */}
        <div class="sr-only">
            <div itemprop="name">Oriol Macias</div>
            <div itemprop="jobTitle">Software-Entwickler</div>
            <div itemprop="description">
                Lösungsorientierter Backend-Entwickler, spezialisiert auf
                industrielle Protokollintegration (SNMP, MODBUS, BACnet) mit
                über 8 Jahren Erfahrung in Hochleistungsanwendungen.
            </div>
            <div itemprop="email">oriolomb@gmail.com</div>
            <a itemprop="url" href="https://oriolmacias.dev"
                >https://oriolmacias.dev</a
            >
            <a itemprop="sameAs" href="https://github.com/MaciWP">GitHub</a>
            <a
                itemprop="sameAs"
                href="https://linkedin.com/in/oriolmaciasbadosa">LinkedIn</a
            >
        </div>
    </div>
</Layout>
