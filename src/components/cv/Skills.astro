---
/**
 * Skills.astro - SSG optimized version
 * Static generation for better performance
 * Swiss market: 5 categories (languages, libraries, protocols, devops, databases)
 * Layout optimized: Libraries full width, DevOps at bottom full width
 * Uses inline SVG icons (no FontAwesome fonts)
 */
import skillsData, { getSectionTitle } from '../../data/skills';
import SvgIcons from '../icons/SvgIcons.astro';

interface Props {
  lang?: string;
}

const { lang = 'en' } = Astro.props;

// Get section titles in the specified language
const titles = {
  main: getSectionTitle('skills', lang),
  languages: getSectionTitle('languages', lang),
  libraries: getSectionTitle('libraries', lang),
  protocols: getSectionTitle('protocols', lang),
  devops: getSectionTitle('devops', lang),
  databases: getSectionTitle('databases', lang)
};

// Helper to extract icon name from FA class (e.g., "fab fa-python" -> "python")
const getIconName = (faClass: string): string => {
  return faClass.replace(/^(fas|fab|fa-solid|fa-brands)\s+fa-/, '');
};
---

<section id="skills" class="mb-16" aria-labelledby="skills-heading">
  <!-- Section Header with CSS animation (no JS dependency) -->
  <div class="flex items-center mb-6 section-header-animate" style="--anim-delay: 0ms;">
    <div class="w-10 h-10 flex items-center justify-center bg-brand-red text-white rounded-none section-icon">
      <SvgIcons name="code" class="w-4 h-4" />
    </div>
    <h2 id="skills-heading" class="text-2xl font-bold ml-3">{titles.main}</h2>
  </div>

  <!-- Main container -->
  <div class="bg-white dark:bg-dark-surface p-6 border border-gray-200 dark:border-dark-border rounded-none shadow-sm section-content-animate" style="--anim-delay: 100ms; transition: background-color 100ms ease-out, border-color 100ms ease-out;">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">

      <!-- Row 1: Programming Languages (left) -->
      <div class="space-y-4 skill-category-animate" style="--anim-delay: 150ms;">
        <div class="border-b border-gray-200 dark:border-gray-700 pb-3 mb-4">
          <h3 class="text-lg font-semibold flex items-center gap-2">
            <div class="w-8 h-8 bg-red-100 dark:bg-red-900/20 flex items-center justify-center rounded-none">
              <SvgIcons name="code" class="w-4 h-4 text-brand-red" />
            </div>
            {titles.languages}
          </h3>
        </div>
        <div class="flex flex-wrap gap-3 min-h-[44px]">
          {skillsData.languages.map((skill) => (
            <div class="skill-badge bg-white dark:bg-dark-surface border-2 border-gray-200 dark:border-dark-border px-3 py-2 rounded-none inline-flex items-center justify-center text-sm gap-2 cursor-default hover:border-brand-red hover:bg-red-50 dark:hover:bg-red-900/20 hover:shadow-md hover:-translate-y-0.5" style="transition: background-color 100ms ease-out, border-color 100ms ease-out, transform 100ms ease-out, box-shadow 100ms ease-out;">
              <SvgIcons name={getIconName(skill.icon)} class="w-4 h-4 text-brand-red" />
              <span>{skill.name}</span>
            </div>
          ))}
        </div>
      </div>

      <!-- Row 1: Databases (right) -->
      <div class="space-y-4 skill-category-animate" style="--anim-delay: 200ms;">
        <div class="border-b border-gray-200 dark:border-gray-700 pb-3 mb-4">
          <h3 class="text-lg font-semibold flex items-center gap-2">
            <div class="w-8 h-8 bg-red-100 dark:bg-red-900/20 flex items-center justify-center rounded-none">
              <SvgIcons name="database" class="w-4 h-4 text-brand-red" />
            </div>
            {titles.databases}
          </h3>
        </div>
        <div class="flex flex-wrap gap-3 min-h-[44px]">
          {skillsData.databases.map((db) => (
            <div class="skill-badge bg-white dark:bg-dark-surface border-2 border-gray-200 dark:border-dark-border px-3 py-2 rounded-none inline-flex items-center justify-center text-sm gap-2 cursor-default hover:border-brand-red hover:bg-red-50 dark:hover:bg-red-900/20 hover:shadow-md hover:-translate-y-0.5" style="transition: background-color 100ms ease-out, border-color 100ms ease-out, transform 100ms ease-out, box-shadow 100ms ease-out;">
              <SvgIcons name={getIconName(db.icon)} class="w-4 h-4 text-brand-red" />
              <span>{db.name}</span>
            </div>
          ))}
        </div>
      </div>

      <!-- Row 2: Libraries & Frameworks (full width) -->
      <div class="space-y-4 skill-category-animate md:col-span-2" style="--anim-delay: 250ms;">
        <div class="border-b border-gray-200 dark:border-gray-700 pb-3 mb-4">
          <h3 class="text-lg font-semibold flex items-center gap-2">
            <div class="w-8 h-8 bg-red-100 dark:bg-red-900/20 flex items-center justify-center rounded-none">
              <SvgIcons name="puzzle-piece" class="w-4 h-4 text-brand-red" />
            </div>
            {titles.libraries}
          </h3>
        </div>
        <div class="flex flex-wrap gap-3 min-h-[44px]">
          {skillsData.libraries.map((lib) => (
            <div class="skill-badge bg-white dark:bg-dark-surface border-2 border-gray-200 dark:border-dark-border px-3 py-2 rounded-none inline-flex items-center justify-center text-sm gap-2 cursor-default hover:border-brand-red hover:bg-red-50 dark:hover:bg-red-900/20 hover:shadow-md hover:-translate-y-0.5" style="transition: background-color 100ms ease-out, border-color 100ms ease-out, transform 100ms ease-out, box-shadow 100ms ease-out;">
              <SvgIcons name={getIconName(lib.icon)} class="w-4 h-4 text-brand-red" />
              <span>{lib.name}</span>
            </div>
          ))}
        </div>
      </div>

      <!-- Row 3: Protocols & Data Formats (full width) -->
      <div class="space-y-4 skill-category-animate md:col-span-2" style="--anim-delay: 350ms;">
        <div class="border-b border-gray-200 dark:border-gray-700 pb-3 mb-4">
          <h3 class="text-lg font-semibold flex items-center gap-2">
            <div class="w-8 h-8 bg-red-100 dark:bg-red-900/20 flex items-center justify-center rounded-none">
              <SvgIcons name="network-wired" class="w-4 h-4 text-brand-red" />
            </div>
            {titles.protocols}
          </h3>
        </div>
        <div class="flex flex-wrap gap-3 min-h-[44px]">
          {skillsData.protocols.map((protocol) => (
            <div class="skill-badge bg-white dark:bg-dark-surface border-2 border-gray-200 dark:border-dark-border px-3 py-2 rounded-none inline-flex items-center justify-center text-sm gap-2 cursor-default hover:border-brand-red hover:bg-red-50 dark:hover:bg-red-900/20 hover:shadow-md hover:-translate-y-0.5" style="transition: background-color 100ms ease-out, border-color 100ms ease-out, transform 100ms ease-out, box-shadow 100ms ease-out;">
              <SvgIcons name={getIconName(protocol.icon)} class="w-4 h-4 text-brand-red" />
              <span>{protocol.name}</span>
            </div>
          ))}
        </div>
      </div>

      <!-- Row 4: DevOps & Tools (full width, bottom) -->
      <div class="space-y-4 skill-category-animate md:col-span-2" style="--anim-delay: 450ms;">
        <div class="border-b border-gray-200 dark:border-gray-700 pb-3 mb-4">
          <h3 class="text-lg font-semibold flex items-center gap-2">
            <div class="w-8 h-8 bg-red-100 dark:bg-red-900/20 flex items-center justify-center rounded-none">
              <SvgIcons name="cogs" class="w-4 h-4 text-brand-red" />
            </div>
            {titles.devops}
          </h3>
        </div>
        <div class="flex flex-wrap gap-3 min-h-[44px]">
          {skillsData.devops.map((tool) => (
            <div class="skill-badge bg-white dark:bg-dark-surface border-2 border-gray-200 dark:border-dark-border px-3 py-2 rounded-none inline-flex items-center justify-center text-sm gap-2 cursor-default hover:border-brand-red hover:bg-red-50 dark:hover:bg-red-900/20 hover:shadow-md hover:-translate-y-0.5" style="transition: background-color 100ms ease-out, border-color 100ms ease-out, transform 100ms ease-out, box-shadow 100ms ease-out;">
              <SvgIcons name={getIconName(tool.icon)} class="w-4 h-4 text-brand-red" />
              <span>{tool.name}</span>
            </div>
          ))}
        </div>
      </div>

    </div>
  </div>
</section>
