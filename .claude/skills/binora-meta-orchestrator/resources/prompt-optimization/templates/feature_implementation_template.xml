<!--
EasyBoard Feature Implementation Prompt Template
Use this template for adding new features to EasyBoard
Replace {{PLACEHOLDERS}} with actual values
-->

<task>Implement {{FEATURE_NAME}} with {{KEY_REQUIREMENTS}}</task>

<context>
  <project>EasyBoard (Flutter 3.24, Material 3, Riverpod 2.4.9)</project>
  <requirements>
    - {{REQUIREMENT_1}}
    - {{REQUIREMENT_2}}
    - {{REQUIREMENT_3}}
    - {{PERFORMANCE_TARGET}} (e.g., <100ms, >80% coverage)
    - {{ACCESSIBILITY_TARGET}} (e.g., WCAG AA, semantic labels)
  </requirements>
  <affected_files>
    - {{NEW_OR_MODIFIED_FILE_1}} ({{PURPOSE_1}})
    - {{NEW_OR_MODIFIED_FILE_2}} ({{PURPOSE_2}})
    - {{NEW_OR_MODIFIED_FILE_3}} ({{PURPOSE_3}})
  </affected_files>
  <architecture_pattern>{{PATTERN}} (e.g., Service-oriented with constructor DI, Strategy Pattern, Repository Pattern)</architecture_pattern>
  <current_state>
    - {{CURRENT_IMPLEMENTATION_1}}
    - {{CURRENT_IMPLEMENTATION_2}}
    - {{CURRENT_IMPLEMENTATION_3}}
  </current_state>
  <dependencies>
    - {{PACKAGE_1}} {{VERSION_1}} ({{PURPOSE}})
    - {{PACKAGE_2}} {{VERSION_2}} ({{PURPOSE}})
  </dependencies>
</context>

<instructions>
1. Create {{NEW_FILE_1}} with:
   - {{CLASS_OR_WIDGET_1}} following {{PATTERN}}
   - {{KEY_METHODS_OR_PROPERTIES_1}}
   - {{SPECIFIC_IMPLEMENTATION_DETAILS_1}}

2. Create {{NEW_FILE_2}}:
   - @riverpod {{PROVIDER_TYPE}} {{PROVIDER_NAME}}
   - State<{{STATE_TYPE}}> with initial value from {{SOURCE}}
   - {{KEY_METHODS}} for state mutations
   - {{PERSISTENCE}} to SharedPreferences/Isar on change

3. Update {{MODIFIED_FILE_1}}:
   - {{MODIFICATION_1}}
   - {{MODIFICATION_2}}
   - {{INTEGRATION_WITH_EXISTING_CODE}}

4. Update {{MODIFIED_FILE_2}}:
   - {{MODIFICATION_3}}
   - {{MODIFICATION_4}}
   - Wire to {{PROVIDER_OR_SERVICE}}

5. {{ADDITIONAL_INTEGRATION_STEP_1}}

6. {{ADDITIONAL_INTEGRATION_STEP_2}}

7. Test {{FEATURE_NAME}} in {{AFFECTED_SCREENS}}:
   - {{SCREEN_1}}: {{WHAT_TO_TEST}}
   - {{SCREEN_2}}: {{WHAT_TO_TEST}}
   - {{SCREEN_3}}: {{WHAT_TO_TEST}}

8. Verify specific components:
   - {{COMPONENT_1}}: {{VERIFICATION_CRITERIA}}
   - {{COMPONENT_2}}: {{VERIFICATION_CRITERIA}}
   - {{COMPONENT_3}}: {{VERIFICATION_CRITERIA}}

9. Create unit tests in test/{{TEST_PATH}}/{{TEST_FILE}}.dart:
   - {{TEST_CASE_1}} with Mock{{SERVICE}}
   - {{TEST_CASE_2}} with edge case {{EDGE_CASE}}
   - {{TEST_CASE_3}} with error scenario {{ERROR_SCENARIO}}

10. Run flutter analyze (0 errors required)

11. Run code generation: flutter pub run build_runner build --delete-conflicting-outputs

12. Verify performance: {{BENCHMARK_METHOD}} (target: {{PERFORMANCE_TARGET}})
</instructions>

<output_format>
<implementation>
  <new_files>
    <file path="{{NEW_FILE_PATH_1}}">
      {{DESCRIPTION_OF_CONTENTS_1}}:
      - {{KEY_CLASS_OR_WIDGET}}
      - {{KEY_METHODS}}
      - {{PATTERNS_FOLLOWED}}
      - {{COMPLETE_CODE_OR_STRUCTURE}}
    </file>
    <file path="{{NEW_FILE_PATH_2}}">
      {{DESCRIPTION_OF_CONTENTS_2}}:
      - {{PROVIDER_OR_SERVICE}}
      - {{STATE_MANAGEMENT}}
      - {{PERSISTENCE_LOGIC}}
    </file>
  </new_files>
  <modified_files>
    <file path="{{MODIFIED_FILE_PATH_1}}">
      DIFF:
      - {{CHANGE_1}}
      - {{CHANGE_2}}
      - {{CHANGE_3}}
    </file>
    <file path="{{MODIFIED_FILE_PATH_2}}">
      DIFF:
      - {{CHANGE_4}}
      - {{CHANGE_5}}
    </file>
  </modified_files>
</implementation>
<testing_results>
  <manual_test_checklist>
    ## {{FEATURE_NAME}} Functionality
    - [ ] {{FUNCTIONAL_TEST_1}}
    - [ ] {{FUNCTIONAL_TEST_2}}
    - [ ] {{FUNCTIONAL_TEST_3}}

    ## Screen Coverage
    - [ ] {{SCREEN_1}}: {{WHAT_TO_VERIFY}}
    - [ ] {{SCREEN_2}}: {{WHAT_TO_VERIFY}}
    - [ ] {{SCREEN_3}}: {{WHAT_TO_VERIFY}}

    ## Components
    - [ ] {{COMPONENT_1}}: {{VERIFICATION}}
    - [ ] {{COMPONENT_2}}: {{VERIFICATION}}

    ## Edge Cases
    - [ ] {{EDGE_CASE_1}}
    - [ ] {{EDGE_CASE_2}}
    - [ ] {{EDGE_CASE_3}}

    ## Performance
    - [ ] {{PERFORMANCE_METRIC_1}} {{TARGET}}
    - [ ] {{PERFORMANCE_METRIC_2}} {{TARGET}}

    ## Accessibility
    - [ ] {{ACCESSIBILITY_CHECK_1}}
    - [ ] {{ACCESSIBILITY_CHECK_2}}
  </manual_test_checklist>
  <unit_tests>
    - test/{{TEST_PATH}}/{{TEST_FILE}}.dart
    - {{TEST_COUNT}} test cases
    - Coverage: {{COVERAGE_PERCENTAGE}}%
  </unit_tests>
</testing_results>
<verification>
  <flutter_analyze>
    Command: flutter analyze
    Expected: No issues found! (0 errors, 0 warnings, 0 lints)
  </flutter_analyze>
  <build_runner>
    Command: cd board_game_scorer && flutter pub run build_runner build --delete-conflicting-outputs
    Expected: [INFO] Succeeded after X.Xs with Y outputs
  </build_runner>
  <flutter_test>
    Command: flutter test test/{{TEST_PATH}}/{{TEST_FILE}}.dart
    Expected: All tests pass ({{TEST_COUNT}} passed, 0 failed)
  </flutter_test>
  <performance_benchmark>
    Method: {{BENCHMARK_METHOD}}
    Target: {{PERFORMANCE_TARGET}}
    Tool: {{PROFILING_TOOL}} (LoggingService, DevTools, etc.)
  </performance_benchmark>
</verification>
</output_format>

<!--
EXAMPLES OF PLACEHOLDERS:

FEATURE_NAME: Dark mode, Premium subscription, Export to PDF, Voice commands
KEY_REQUIREMENTS: Persistent preference, Material Design 3 compliance
REQUIREMENT_1: System-wide toggle in SettingsScreen
REQUIREMENT_2: Persist in SharedPreferences
REQUIREMENT_3: WCAG AA contrast compliance
PERFORMANCE_TARGET: <100ms theme switch, <150ms inference, >80% coverage
ACCESSIBILITY_TARGET: WCAG AA, semantic labels, screen reader support
NEW_OR_MODIFIED_FILE_1: lib/config/app_theme.dart (theme definitions - new)
PURPOSE_1: Define Material 3 light/dark themes
PATTERN: Service-oriented with constructor DI, Strategy Pattern
CURRENT_IMPLEMENTATION_1: App uses default Material 3 light theme
CURRENT_IMPLEMENTATION_2: No theme customization exists
PACKAGE_1: shared_preferences, supabase_flutter, pdf
VERSION_1: 2.2.2, 2.0.0, 3.10.0
PURPOSE: Persistence, Authentication, PDF generation
NEW_FILE_1: lib/config/app_theme.dart
CLASS_OR_WIDGET_1: AppTheme class with static ThemeData properties
KEY_METHODS_OR_PROPERTIES_1: lightTheme, darkTheme static getters
SPECIFIC_IMPLEMENTATION_DETAILS_1: ColorScheme.dark() with custom colors
NEW_FILE_2: lib/providers/theme_provider.dart
PROVIDER_TYPE: class ThemeModeNotifier extends _$ThemeModeNotifier
PROVIDER_NAME: themeModeProvider
STATE_TYPE: ThemeMode
SOURCE: UserService.getThemeMode()
KEY_METHODS: toggle(), setThemeMode()
PERSISTENCE: UserService.setThemeMode(mode)
MODIFIED_FILE_1: lib/main.dart
MODIFICATION_1: Wrap MaterialApp with ConsumerWidget
MODIFICATION_2: Add theme: AppTheme.lightTheme
INTEGRATION_WITH_EXISTING_CODE: Use ref.watch(themeModeProvider)
AFFECTED_SCREENS: 16 screens (OnboardingScreen, MainScreen, etc.)
SCREEN_1: SettingsScreen
WHAT_TO_TEST: Toggle switches theme, preference persists
COMPONENT_1: Avatar colors
VERIFICATION_CRITERIA: Contrast against dark backgrounds
TEST_PATH: config, providers, screens
TEST_FILE: app_theme_test, theme_provider_test
TEST_CASE_1: testToggleThemeMode
EDGE_CASE: null preference value
ERROR_SCENARIO: SharedPreferences unavailable
BENCHMARK_METHOD: LoggingService.data('ThemeSwitch', 'Duration', ms)
PROFILING_TOOL: LoggingService, Flutter DevTools Performance
FUNCTIONAL_TEST_1: Toggle switches between Light/Dark/System
WHAT_TO_VERIFY: Theme changes applied, UI readable
VERIFICATION: Colors contrast correctly, text readable
PERFORMANCE_METRIC_1: Theme switch latency
TARGET: <100ms
ACCESSIBILITY_CHECK_1: Text contrast â‰¥4.5:1 (WCAG AA)
TEST_COUNT: 12
COVERAGE_PERCENTAGE: 85
-->
